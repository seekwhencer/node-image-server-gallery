(()=>{var t={7187:t=>{"use strict";var e,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(t,e,n){return Function.prototype.apply.call(t,e,n)};e=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var s=Number.isNaN||function(t){return t!=t};function i(){i.init.call(this)}t.exports=i,t.exports.once=function(t,e){return new Promise((function(n,r){function s(n){t.removeListener(e,i),r(n)}function i(){"function"==typeof t.removeListener&&t.removeListener("error",s),n([].slice.call(arguments))}f(t,e,i,{once:!0}),"error"!==e&&function(t,e,n){"function"==typeof t.on&&f(t,"error",e,n)}(t,s,{once:!0})}))},i.EventEmitter=i,i.prototype._events=void 0,i.prototype._eventsCount=0,i.prototype._maxListeners=void 0;var a=10;function o(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function l(t){return void 0===t._maxListeners?i.defaultMaxListeners:t._maxListeners}function h(t,e,n,r){var s,i,a,h;if(o(n),void 0===(i=t._events)?(i=t._events=Object.create(null),t._eventsCount=0):(void 0!==i.newListener&&(t.emit("newListener",e,n.listener?n.listener:n),i=t._events),a=i[e]),void 0===a)a=i[e]=n,++t._eventsCount;else if("function"==typeof a?a=i[e]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(s=l(t))>0&&a.length>s&&!a.warned){a.warned=!0;var c=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");c.name="MaxListenersExceededWarning",c.emitter=t,c.type=e,c.count=a.length,h=c,console&&console.warn&&console.warn(h)}return t}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function u(t,e,n){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:n},s=c.bind(r);return s.listener=n,r.wrapFn=s,s}function d(t,e,n){var r=t._events;if(void 0===r)return[];var s=r[e];return void 0===s?[]:"function"==typeof s?n?[s.listener||s]:[s]:n?function(t){for(var e=new Array(t.length),n=0;n<e.length;++n)e[n]=t[n].listener||t[n];return e}(s):g(s,s.length)}function p(t){var e=this._events;if(void 0!==e){var n=e[t];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function g(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t[r];return n}function f(t,e,n,r){if("function"==typeof t.on)r.once?t.once(e,n):t.on(e,n);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,(function s(i){r.once&&t.removeEventListener(e,s),n(i)}))}}Object.defineProperty(i,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");a=t}}),i.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},i.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||s(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},i.prototype.getMaxListeners=function(){return l(this)},i.prototype.emit=function(t){for(var e=[],n=1;n<arguments.length;n++)e.push(arguments[n]);var s="error"===t,i=this._events;if(void 0!==i)s=s&&void 0===i.error;else if(!s)return!1;if(s){var a;if(e.length>0&&(a=e[0]),a instanceof Error)throw a;var o=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw o.context=a,o}var l=i[t];if(void 0===l)return!1;if("function"==typeof l)r(l,this,e);else{var h=l.length,c=g(l,h);for(n=0;n<h;++n)r(c[n],this,e)}return!0},i.prototype.addListener=function(t,e){return h(this,t,e,!1)},i.prototype.on=i.prototype.addListener,i.prototype.prependListener=function(t,e){return h(this,t,e,!0)},i.prototype.once=function(t,e){return o(e),this.on(t,u(this,t,e)),this},i.prototype.prependOnceListener=function(t,e){return o(e),this.prependListener(t,u(this,t,e)),this},i.prototype.removeListener=function(t,e){var n,r,s,i,a;if(o(e),void 0===(r=this._events))return this;if(void 0===(n=r[t]))return this;if(n===e||n.listener===e)0==--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,n.listener||e));else if("function"!=typeof n){for(s=-1,i=n.length-1;i>=0;i--)if(n[i]===e||n[i].listener===e){a=n[i].listener,s=i;break}if(s<0)return this;0===s?n.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(n,s),1===n.length&&(r[t]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",t,a||e)}return this},i.prototype.off=i.prototype.removeListener,i.prototype.removeAllListeners=function(t){var e,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[t]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[t]),this;if(0===arguments.length){var s,i=Object.keys(n);for(r=0;r<i.length;++r)"removeListener"!==(s=i[r])&&this.removeAllListeners(s);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=n[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},i.prototype.listeners=function(t){return d(this,t,!0)},i.prototype.rawListeners=function(t){return d(this,t,!1)},i.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):p.call(t,e)},i.prototype.listenerCount=p,i.prototype.eventNames=function(){return this._eventsCount>0?e(this._events):[]}},3195:(t,e,n)=>{var r=n(7455),s=n(9002)((function(t,e){return r(t.length,(function(){return t.apply(e,arguments)}))}));t.exports=s},557:(t,e,n)=>{var r=n(4603),s=n(5814);t.exports=function(){if(0===arguments.length)throw new Error("compose requires at least one argument");return r.apply(this,s(arguments))}},2220:(t,e,n)=>{var r=n(7455),s=n(6224),i=n(9002),a=n(2738),o=i((function(t,e){return 1===t?s(e):r(t,a(t,[],e))}));t.exports=o},1481:(t,e,n)=>{var r=n(9002),s=n(4023),i=r((function(t,e){return s(t,e,[],[])}));t.exports=i},1383:(t,e,n)=>{var r=n(9002),s=n(4793),i=n(4877),a=n(8291),o=n(9488),l=n(123),h=n(368),c=r(s(["filter"],l,(function(t,e){return a(e)?o((function(n,r){return t(e[r])&&(n[r]=e[r]),n}),{},h(e)):i(t,e)})));t.exports=c},7455:t=>{t.exports=function(t,e){switch(t){case 0:return function(){return e.apply(this,arguments)};case 1:return function(t){return e.apply(this,arguments)};case 2:return function(t,n){return e.apply(this,arguments)};case 3:return function(t,n,r){return e.apply(this,arguments)};case 4:return function(t,n,r,s){return e.apply(this,arguments)};case 5:return function(t,n,r,s,i){return e.apply(this,arguments)};case 6:return function(t,n,r,s,i,a){return e.apply(this,arguments)};case 7:return function(t,n,r,s,i,a,o){return e.apply(this,arguments)};case 8:return function(t,n,r,s,i,a,o,l){return e.apply(this,arguments)};case 9:return function(t,n,r,s,i,a,o,l,h){return e.apply(this,arguments)};case 10:return function(t,n,r,s,i,a,o,l,h,c){return e.apply(this,arguments)};default:throw new Error("First argument to _arity must be a non-negative integer no greater than ten")}}},4118:t=>{t.exports=function(t){for(var e,n=[];!(e=t.next()).done;)n.push(e.value);return n}},3542:(t,e,n)=>{var r=n(219);t.exports=function(t,e){return function(){var n=arguments.length;if(0===n)return e();var s=arguments[n-1];return r(s)||"function"!=typeof s[t]?e.apply(this,arguments):s[t].apply(s,Array.prototype.slice.call(arguments,0,n-1))}}},8770:t=>{t.exports=function(t){return function(){return!t.apply(this,arguments)}}},6224:(t,e,n)=>{var r=n(6464);t.exports=function(t){return function e(n){return 0===arguments.length||r(n)?e:t.apply(this,arguments)}}},9002:(t,e,n)=>{var r=n(6224),s=n(6464);t.exports=function(t){return function e(n,i){switch(arguments.length){case 0:return e;case 1:return s(n)?e:r((function(e){return t(n,e)}));default:return s(n)&&s(i)?e:s(n)?r((function(e){return t(e,i)})):s(i)?r((function(e){return t(n,e)})):t(n,i)}}}},6370:(t,e,n)=>{var r=n(6224),s=n(9002),i=n(6464);t.exports=function(t){return function e(n,a,o){switch(arguments.length){case 0:return e;case 1:return i(n)?e:s((function(e,r){return t(n,e,r)}));case 2:return i(n)&&i(a)?e:i(n)?s((function(e,n){return t(e,a,n)})):i(a)?s((function(e,r){return t(n,e,r)})):r((function(e){return t(n,a,e)}));default:return i(n)&&i(a)&&i(o)?e:i(n)&&i(a)?s((function(e,n){return t(e,n,o)})):i(n)&&i(o)?s((function(e,n){return t(e,a,n)})):i(a)&&i(o)?s((function(e,r){return t(n,e,r)})):i(n)?r((function(e){return t(e,a,o)})):i(a)?r((function(e){return t(n,e,o)})):i(o)?r((function(e){return t(n,a,e)})):t(n,a,o)}}}},2738:(t,e,n)=>{var r=n(7455),s=n(6464);t.exports=function t(e,n,i){return function(){for(var a=[],o=0,l=e,h=0;h<n.length||o<arguments.length;){var c;h<n.length&&(!s(n[h])||o>=arguments.length)?c=n[h]:(c=arguments[o],o+=1),a[h]=c,s(c)||(l-=1),h+=1}return l<=0?i.apply(this,a):r(l,t(e,a,i))}}},4793:(t,e,n)=>{var r=n(219),s=n(9082);t.exports=function(t,e,n){return function(){if(0===arguments.length)return n();var i=Array.prototype.slice.call(arguments,0),a=i.pop();if(!r(a)){for(var o=0;o<t.length;){if("function"==typeof a[t[o]])return a[t[o]].apply(a,i);o+=1}if(s(a)){var l=e.apply(null,i);return l(a)}}return n.apply(this,arguments)}}},4023:(t,e,n)=>{var r=n(4118),s=n(2976),i=n(4931),a=n(7684),o=n(1361),l=n(368),h=n(6433);function c(t,e,n,i){var a=r(t),o=r(e);function l(t,e){return u(t,e,n.slice(),i.slice())}return!s((function(t,e){return!s(l,e,t)}),o,a)}function u(t,e,n,r){if(o(t,e))return!0;var s=h(t);if(s!==h(e))return!1;if(null==t||null==e)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof e["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](e)&&"function"==typeof e["fantasy-land/equals"]&&e["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof e.equals)return"function"==typeof t.equals&&t.equals(e)&&"function"==typeof e.equals&&e.equals(t);switch(s){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===i(t.constructor))return t===e;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof e||!o(t.valueOf(),e.valueOf()))return!1;break;case"Date":if(!o(t.valueOf(),e.valueOf()))return!1;break;case"Error":return t.name===e.name&&t.message===e.message;case"RegExp":if(t.source!==e.source||t.global!==e.global||t.ignoreCase!==e.ignoreCase||t.multiline!==e.multiline||t.sticky!==e.sticky||t.unicode!==e.unicode)return!1}for(var d=n.length-1;d>=0;){if(n[d]===t)return r[d]===e;d-=1}switch(s){case"Map":return t.size===e.size&&c(t.entries(),e.entries(),n.concat([t]),r.concat([e]));case"Set":return t.size===e.size&&c(t.values(),e.values(),n.concat([t]),r.concat([e]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var p=l(t);if(p.length!==l(e).length)return!1;var g=n.concat([t]),f=r.concat([e]);for(d=p.length-1;d>=0;){var m=p[d];if(!a(m,e)||!u(e[m],t[m],g,f))return!1;d-=1}return!0}t.exports=u},4877:t=>{t.exports=function(t,e){for(var n=0,r=e.length,s=[];n<r;)t(e[n])&&(s[s.length]=e[n]),n+=1;return s}},4931:t=>{t.exports=function(t){var e=String(t).match(/^function (\w*)/);return null==e?"":e[1]}},7684:t=>{t.exports=function(t,e){return Object.prototype.hasOwnProperty.call(e,t)}},7243:(t,e,n)=>{var r=n(6069);t.exports=function(t,e){return r(e,t,0)>=0}},2976:t=>{t.exports=function(t,e,n){for(var r=0,s=n.length;r<s;){if(t(e,n[r]))return!0;r+=1}return!1}},6069:(t,e,n)=>{var r=n(1481);t.exports=function(t,e,n){var s,i;if("function"==typeof t.indexOf)switch(typeof e){case"number":if(0===e){for(s=1/e;n<t.length;){if(0===(i=t[n])&&1/i===s)return n;n+=1}return-1}if(e!=e){for(;n<t.length;){if("number"==typeof(i=t[n])&&i!=i)return n;n+=1}return-1}return t.indexOf(e,n);case"string":case"boolean":case"function":case"undefined":return t.indexOf(e,n);case"object":if(null===e)return t.indexOf(e,n)}for(;n<t.length;){if(r(t[n],e))return n;n+=1}return-1}},7587:(t,e,n)=>{var r=n(7684),s=Object.prototype.toString,i=function(){return"[object Arguments]"===s.call(arguments)?function(t){return"[object Arguments]"===s.call(t)}:function(t){return r("callee",t)}}();t.exports=i},219:t=>{t.exports=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)}},3219:(t,e,n)=>{var r=n(6224),s=n(219),i=n(190),a=r((function(t){return!!s(t)||!!t&&("object"==typeof t&&(!i(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))}));t.exports=a},2144:t=>{t.exports=function(t){var e=Object.prototype.toString.call(t);return"[object Function]"===e||"[object AsyncFunction]"===e||"[object GeneratorFunction]"===e||"[object AsyncGeneratorFunction]"===e}},7e3:t=>{t.exports=Number.isInteger||function(t){return t<<0===t}},8291:t=>{t.exports=function(t){return"[object Object]"===Object.prototype.toString.call(t)}},6464:t=>{t.exports=function(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}},190:t=>{t.exports=function(t){return"[object String]"===Object.prototype.toString.call(t)}},9082:t=>{t.exports=function(t){return null!=t&&"function"==typeof t["@@transducer/step"]}},6692:t=>{t.exports=function(t,e){for(var n=0,r=e.length,s=Array(r);n<r;)s[n]=t(e[n]),n+=1;return s}},4778:(t,e,n)=>{var r=n(7684);t.exports="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1,s=arguments.length;n<s;){var i=arguments[n];if(null!=i)for(var a in i)r(a,i)&&(e[a]=i[a]);n+=1}return e}},1361:t=>{t.exports="function"==typeof Object.is?Object.is:function(t,e){return t===e?0!==t||1/t==1/e:t!=t&&e!=e}},6015:t=>{t.exports=function(t,e){return function(){return e.call(this,t.apply(this,arguments))}}},6001:t=>{t.exports=function(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}},9488:(t,e,n)=>{var r=n(3219),s=n(9874),i=n(3195);function a(t,e,n){for(var r=n.next();!r.done;){if((e=t["@@transducer/step"](e,r.value))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r=n.next()}return t["@@transducer/result"](e)}function o(t,e,n,r){return t["@@transducer/result"](n[r](i(t["@@transducer/step"],t),e))}var l="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";t.exports=function(t,e,n){if("function"==typeof t&&(t=s(t)),r(n))return function(t,e,n){for(var r=0,s=n.length;r<s;){if((e=t["@@transducer/step"](e,n[r]))&&e["@@transducer/reduced"]){e=e["@@transducer/value"];break}r+=1}return t["@@transducer/result"](e)}(t,e,n);if("function"==typeof n["fantasy-land/reduce"])return o(t,e,n,"fantasy-land/reduce");if(null!=n[l])return a(t,e,n[l]());if("function"==typeof n.next)return a(t,e,n);if("function"==typeof n.reduce)return o(t,e,n,"reduce");throw new TypeError("reduce: list must be array or iterable")}},5123:t=>{var e=function(t){return(t<10?"0":"")+t},n="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1)+"-"+e(t.getUTCDate())+"T"+e(t.getUTCHours())+":"+e(t.getUTCMinutes())+":"+e(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};t.exports=n},1136:(t,e,n)=>{var r=n(7243),s=n(6692),i=n(6001),a=n(5123),o=n(368),l=n(3266);t.exports=function t(e,n){var h=function(s){var i=n.concat([e]);return r(s,i)?"<Circular>":t(s,i)},c=function(t,e){return s((function(e){return i(e)+": "+h(t[e])}),e.slice().sort())};switch(Object.prototype.toString.call(e)){case"[object Arguments]":return"(function() { return arguments; }("+s(h,e).join(", ")+"))";case"[object Array]":return"["+s(h,e).concat(c(e,l((function(t){return/^\d+$/.test(t)}),o(e)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof e?"new Boolean("+h(e.valueOf())+")":e.toString();case"[object Date]":return"new Date("+(isNaN(e.valueOf())?h(NaN):i(a(e)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof e?"new Number("+h(e.valueOf())+")":1/e==-1/0?"-0":e.toString(10);case"[object String]":return"object"==typeof e?"new String("+h(e.valueOf())+")":i(e);case"[object Undefined]":return"undefined";default:if("function"==typeof e.toString){var u=e.toString();if("[object Object]"!==u)return u}return"{"+c(e,o(e)).join(", ")+"}"}}},3714:t=>{t.exports={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}}},123:(t,e,n)=>{var r=n(9002),s=n(3714),i=function(){function t(t,e){this.xf=e,this.f=t}return t.prototype["@@transducer/init"]=s.init,t.prototype["@@transducer/result"]=s.result,t.prototype["@@transducer/step"]=function(t,e){return this.f(e)?this.xf["@@transducer/step"](t,e):t},t}(),a=r((function(t,e){return new i(t,e)}));t.exports=a},9874:t=>{var e=function(){function t(t){this.f=t}return t.prototype["@@transducer/init"]=function(){throw new Error("init not implemented on XWrap")},t.prototype["@@transducer/result"]=function(t){return t},t.prototype["@@transducer/step"]=function(t,e){return this.f(t,e)},t}();t.exports=function(t){return new e(t)}},5189:(t,e,n)=>{var r=n(9002),s=n(2144),i=n(2220),a=n(5243),o=r((function(t,e){return i(t+1,(function(){var n=arguments[t];if(null!=n&&s(n[e]))return n[e].apply(n,Array.prototype.slice.call(arguments,0,t));throw new TypeError(a(n)+' does not have a method named "'+e+'"')}))}));t.exports=o},368:(t,e,n)=>{var r=n(6224),s=n(7684),i=n(7587),a=!{toString:null}.propertyIsEnumerable("toString"),o=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],l=function(){"use strict";return arguments.propertyIsEnumerable("length")}(),h=function(t,e){for(var n=0;n<t.length;){if(t[n]===e)return!0;n+=1}return!1},c="function"!=typeof Object.keys||l?r((function(t){if(Object(t)!==t)return[];var e,n,r=[],c=l&&i(t);for(e in t)!s(e,t)||c&&"length"===e||(r[r.length]=e);if(a)for(n=o.length-1;n>=0;)s(e=o[n],t)&&!h(r,e)&&(r[r.length]=e),n-=1;return r})):r((function(t){return Object(t)!==t?[]:Object.keys(t)}));t.exports=c},780:(t,e,n)=>{var r=n(4778),s=n(9002)((function(t,e){return r({},t,e)}));t.exports=s},8576:(t,e,n)=>{var r=n(9002),s=n(9036),i=r((function(t,e){return s((function(t,e,n){return e}),t,e)}));t.exports=i},9036:(t,e,n)=>{var r=n(6370),s=n(8291),i=n(6027),a=r((function t(e,n,r){return i((function(n,r,i){return s(r)&&s(i)?t(e,r,i):e(n,r,i)}),n,r)}));t.exports=a},6027:(t,e,n)=>{var r=n(6370),s=n(7684),i=r((function(t,e,n){var r,i={};for(r in e)s(r,e)&&(i[r]=s(r,n)?t(r,e[r],n[r]):e[r]);for(r in n)s(r,n)&&!s(r,i)&&(i[r]=n[r]);return i}));t.exports=i},7041:(t,e,n)=>{var r=n(9002),s=n(190),i=r((function(t,e){var n=t<0?e.length+t:t;return s(e)?e.charAt(n):e[n]}));t.exports=i},7430:(t,e,n)=>{var r=n(9002),s=n(4439),i=r((function(t,e){return s([t],e)[0]}));t.exports=i},4439:(t,e,n)=>{var r=n(9002),s=n(7e3),i=n(7041),a=r((function(t,e){return t.map((function(t){for(var n,r=e,a=0;a<t.length;){if(null==r)return;n=t[a],r=s(n)?i(n,r):r[n],a+=1}return r}))}));t.exports=a},4603:(t,e,n)=>{var r=n(7455),s=n(6015),i=n(793),a=n(3656);t.exports=function(){if(0===arguments.length)throw new Error("pipe requires at least one argument");return r(arguments[0].length,i(s,arguments[0],a(arguments)))}},2478:(t,e,n)=>{var r=n(9002),s=n(7430),i=r((function(t,e){return s([t],e)}));t.exports=i},793:(t,e,n)=>{var r=n(6370)(n(9488));t.exports=r},3266:(t,e,n)=>{var r=n(8770),s=n(9002),i=n(1383),a=s((function(t,e){return i(r(t),e)}));t.exports=a},5814:(t,e,n)=>{var r=n(6224),s=n(190),i=r((function(t){return s(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()}));t.exports=i},1753:(t,e,n)=>{var r=n(3542),s=n(6370)(r("slice",(function(t,e,n){return Array.prototype.slice.call(n,t,e)})));t.exports=s},1667:(t,e,n)=>{var r=n(9002)((function(t,e){return Array.prototype.slice.call(e,0).sort((function(e,n){var r=t(e),s=t(n);return r<s?-1:r>s?1:0}))}));t.exports=r},3656:(t,e,n)=>{var r=n(3542),s=n(6224)(r("tail",n(1753)(1,1/0)));t.exports=s},620:(t,e,n)=>{var r=n(5189)(0,"toLowerCase");t.exports=r},5243:(t,e,n)=>{var r=n(6224),s=n(1136),i=r((function(t){return s(t,[])}));t.exports=i},6433:(t,e,n)=>{var r=n(6224)((function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)}));t.exports=r},3379:t=>{"use strict";var e=[];function n(t){for(var n=-1,r=0;r<e.length;r++)if(e[r].identifier===t){n=r;break}return n}function r(t,r){for(var i={},a=[],o=0;o<t.length;o++){var l=t[o],h=r.base?l[0]+r.base:l[0],c=i[h]||0,u="".concat(h," ").concat(c);i[h]=c+1;var d=n(u),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var g=s(p,r);r.byIndex=o,e.splice(o,0,{identifier:u,updater:g,references:1})}a.push(u)}return a}function s(t,e){var n=e.domAPI(e);n.update(t);return function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,s){var i=r(t=t||[],s=s||{});return function(t){t=t||[];for(var a=0;a<i.length;a++){var o=n(i[a]);e[o].references--}for(var l=r(t,s),h=0;h<i.length;h++){var c=n(i[h]);0===e[c].references&&(e[c].updater(),e.splice(c,1))}i=l}}},569:t=>{"use strict";var e={};t.exports=function(t,n){var r=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},9216:t=>{"use strict";t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{"use strict";t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{"use strict";t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var s=void 0!==n.layer;s&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,s&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var i=n.sourceMap;i&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),e.styleTagTransform(r,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{"use strict";t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},3853:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-folder\\">\\n    <div class=\\"nbb-folder-folders\\" data-folders></div>\\n    <div class=\\"nbb-folder-files-options\\" data-files-options></div>\\n    <div class=\\"nbb-folder-files\\" data-files></div>\\n    <div class=\\"nbb-folder-latest\\" data-latest></div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-folder\\">\\n    <div class=\\"nbb-folder-folders\\" data-folders></div>\\n    <div class=\\"nbb-folder-files-options\\" data-files-options></div>\\n    <div class=\\"nbb-folder-files\\" data-files></div>\\n    <div class=\\"nbb-folder-latest\\" data-latest></div>\\n</div>\\n"\n    ];\n\n    return strings;\n}())')},2420:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n    var strings = ["<div class=\\"nbb-folder__folder-item__image\\">\\n    <img>\\n</div>\\n\\n"];\n    strings.raw = ["<div class=\\"nbb-folder__folder-item__image\\">\\n    <img>\\n</div>\\n\\n"];\n    return strings;\n}())')},4665:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-folder__folder-item\\">\\n    <div class=\\"nbb-folder__folder-item__name\\">\\n        ",\n        "\\n        <span class=\\"nbb-folder__folder-item__imagescount\\">",\n        "</span>\\n        ",\n        "\\n    </div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-folder__folder-item\\">\\n    <div class=\\"nbb-folder__folder-item__name\\">\\n        ",\n        "\\n        <span class=\\"nbb-folder__folder-item__imagescount\\">",\n        "</span>\\n        ",\n        "\\n    </div>\\n</div>\\n"\n    ];\n\n    return strings;\n}(), name, count.images, count.folders > 0 ? "<span class=\\"nbb-folder__folder-item__folderscount\\">" + count.folders + "</span>" : \'\')')},2079:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-folder__image-item__stats\\">\\n    <div class=\\"\\" data-number></div>\\n    <div class=\\"\\" data-left></div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-folder__image-item__stats\\">\\n    <div class=\\"\\" data-number></div>\\n    <div class=\\"\\" data-left></div>\\n</div>\\n"\n    ];\n\n    return strings;\n}())')},8775:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-folder__image-item\\">\\n    <div class=\\"nbb-folder__image-item__name\\">",\n        "</div>\\n    <div class=\\"nbb-folder__image-item__image\\">\\n        <img>\\n    </div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-folder__image-item\\">\\n    <div class=\\"nbb-folder__image-item__name\\">",\n        "</div>\\n    <div class=\\"nbb-folder__image-item__image\\">\\n        <img>\\n    </div>\\n</div>\\n"\n    ];\n\n    return strings;\n}(), name)')},8457:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-folder-files-options__selection\\">\\n    <div class=\\"nbb-folder-files-options__picking-mode\\">\\n        <button data-picking-mode>PICKING MODE</button>\\n    </div>\\n    <div class=\\"nbb-folder-files-options__selection-group\\">\\n        <button data-selection-all>ALL</button>\\n        <button data-selection-none>NONE</button>\\n        <button data-selection-invert>INVERT</button>\\n    </div>\\n    <div class=\\"nbb-folder-files-options__latest\\">\\n        <button data-load-latest>LATEST</button>\\n    </div>\\n</div>\\n\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-folder-files-options__selection\\">\\n    <div class=\\"nbb-folder-files-options__picking-mode\\">\\n        <button data-picking-mode>PICKING MODE</button>\\n    </div>\\n    <div class=\\"nbb-folder-files-options__selection-group\\">\\n        <button data-selection-all>ALL</button>\\n        <button data-selection-none>NONE</button>\\n        <button data-selection-invert>INVERT</button>\\n    </div>\\n    <div class=\\"nbb-folder-files-options__latest\\">\\n        <button data-load-latest>LATEST</button>\\n    </div>\\n</div>\\n\\n"\n    ];\n\n    return strings;\n}())')},7851:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-imageviewer__controls\\">\\n    <button class=\\"nbb-imageviewer__controls__prev\\" data-prev>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__next\\" data-next>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__close\\" data-close>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"94.926px\\"\\n             height=\\"94.926px\\"\\n             viewBox=\\"0 0 94.926 94.926\\">\\n            <path d=\\"M55.931,47.463L94.306,9.09c0.826-0.827,0.826-2.167,0-2.994L88.833,0.62C88.436,0.224,87.896,0,87.335,0\\n        c-0.562,0-1.101,0.224-1.498,0.62L47.463,38.994L9.089,0.62c-0.795-0.795-2.202-0.794-2.995,0L0.622,6.096\\n        c-0.827,0.827-0.827,2.167,0,2.994l38.374,38.373L0.622,85.836c-0.827,0.827-0.827,2.167,0,2.994l5.473,5.476\\n        c0.397,0.396,0.936,0.62,1.498,0.62s1.1-0.224,1.497-0.62l38.374-38.374l38.374,38.374c0.397,0.396,0.937,0.62,1.498,0.62\\n        s1.101-0.224,1.498-0.62l5.473-5.476c0.826-0.827,0.826-2.167,0-2.994L55.931,47.463z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__layout up\\" data-layout>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n</div>\\n\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-imageviewer__controls\\">\\n    <button class=\\"nbb-imageviewer__controls__prev\\" data-prev>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__next\\" data-next>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__close\\" data-close>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"94.926px\\"\\n             height=\\"94.926px\\"\\n             viewBox=\\"0 0 94.926 94.926\\">\\n            <path d=\\"M55.931,47.463L94.306,9.09c0.826-0.827,0.826-2.167,0-2.994L88.833,0.62C88.436,0.224,87.896,0,87.335,0\\n        c-0.562,0-1.101,0.224-1.498,0.62L47.463,38.994L9.089,0.62c-0.795-0.795-2.202-0.794-2.995,0L0.622,6.096\\n        c-0.827,0.827-0.827,2.167,0,2.994l38.374,38.373L0.622,85.836c-0.827,0.827-0.827,2.167,0,2.994l5.473,5.476\\n        c0.397,0.396,0.936,0.62,1.498,0.62s1.1-0.224,1.497-0.62l38.374-38.374l38.374,38.374c0.397,0.396,0.937,0.62,1.498,0.62\\n        s1.101-0.224,1.498-0.62l5.473-5.476c0.826-0.827,0.826-2.167,0-2.994L55.931,47.463z\\"/>\\n        </svg>\\n    </button>\\n    <button class=\\"nbb-imageviewer__controls__layout up\\" data-layout>\\n        <svg xmlns=\\"http://www.w3.org/2000/svg\\" width=\\"24\\" height=\\"24\\"\\n             viewBox=\\"0 0 24 24\\">\\n            <path d=\\"M8.122 24l-4.122-4 8-8-8-8 4.122-4 11.878 12z\\"/>\\n        </svg>\\n    </button>\\n</div>\\n\\n"\n    ];\n\n    return strings;\n}())')},8918:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n  var strings = ["<div class=\\"nbb-imageviewer\\"></div>\\n"];\n  strings.raw = ["<div class=\\"nbb-imageviewer\\"></div>\\n"];\n  return strings;\n}())')},6383:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-imageviewer__image-item\\">\\n    <div class=\\"nbb-imageviewer__image-item__name\\">",\n        "</div>\\n    <div class=\\"nbb-imageviewer__image-item__image\\">\\n        <picture>\\n            ",\n        "\\n            <img src=\\"\\">\\n        </picture>\\n    </div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-imageviewer__image-item\\">\\n    <div class=\\"nbb-imageviewer__image-item__name\\">",\n        "</div>\\n    <div class=\\"nbb-imageviewer__image-item__image\\">\\n        <picture>\\n            ",\n        "\\n            <img src=\\"\\">\\n        </picture>\\n    </div>\\n</div>\\n"\n    ];\n\n    return strings;\n}(), name, thumbnails.map(t => "\\n            <source srcset=\\"" + t.url + "\\" media=\\"" + t.media + "\\">\\n            ").join(\'\'))')},7174:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n  var strings = ["<div class=\\"nbb-imageviewer__stripe\\"></div>\\n"];\n  strings.raw = ["<div class=\\"nbb-imageviewer__stripe\\"></div>\\n"];\n  return strings;\n}())')},9354:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n    var strings = [\n        "<div class=\\"nbb-imageviewer__stripe__stripe-item\\">\\n    <div class=\\"nbb-imageviewer__stripe__stripe-item__image\\">\\n        <img>\\n        \x3c!--<picture>\\n            ",\n        "\\n            <img src=\\"\\">\\n        </picture>--\x3e\\n    </div>\\n</div>\\n"\n    ];\n\n    strings.raw = [\n        "<div class=\\"nbb-imageviewer__stripe__stripe-item\\">\\n    <div class=\\"nbb-imageviewer__stripe__stripe-item__image\\">\\n        <img>\\n        \x3c!--<picture>\\n            ",\n        "\\n            <img src=\\"\\">\\n        </picture>--\x3e\\n    </div>\\n</div>\\n"\n    ];\n\n    return strings;\n}(), thumbnails.map(t => "<source srcset=\\"" + t.url + "\\" media=\\"" + t.media + "\\">").join(\'\'))')},6007:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n  var strings = ["<div class=\\"nbb-breadcrumb\\"></div>\\n"];\n  strings.raw = ["<div class=\\"nbb-breadcrumb\\"></div>\\n"];\n  return strings;\n}())')},9416:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n  var strings = ["<button>", "</button>\\n"];\n  strings.raw = ["<button>", "</button>\\n"];\n  return strings;\n}(), name)')},2591:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n  var strings = ["<div class=\\"nbb-root\\"></div>\\n"];\n  strings.raw = ["<div class=\\"nbb-root\\"></div>\\n"];\n  return strings;\n}())')},8502:(t,e,n)=>{t.exports=n(4744)('tag(function() {\n  var strings = ["<div class=\\"nbb-pagetitle\\"></div>\\n"];\n  strings.raw = ["<div class=\\"nbb-pagetitle\\"></div>\\n"];\n  return strings;\n}())')},4744:t=>{t.exports=function(t){return function(e){var n=(e=e||{}).scope||{},r=e.tag||function(t,...e){return t.reduce(((t,n,r)=>t+e[r-1]+n))},s=Object.keys(n).join(",");s=s.length?","+s:"";var i=new Function("tag"+s,"return "+t);return e.scope?i(r,...Object.values(n)):i.apply(this,[r])}}}},e={};function n(r){var s=e[r];if(void 0!==s)return s.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;n.g.importScripts&&(t=n.g.location+"");var e=n.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var r=e.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=t+"../"})(),(()=>{"use strict";var t={};n.r(t),n.d(t,{compose:()=>s,merge:()=>e,mergeDeepLeft:()=>l,prop:()=>a,reverse:()=>o,sortBy:()=>r,toLower:()=>i});new class{constructor(){window.NBBLOG=console.log,console.log=this.log}log(){window.NBBOPTIONS&&window.NBBOPTIONS.debug&&window.NBBLOG.apply(this,arguments)}},window.toDOM=t=>(new DOMParser).parseFromString(t,"text/html").documentElement.querySelector("body").firstChild,window.wait=t=>new Promise((e=>{setTimeout((()=>{e()}),t)})),window.randomInt=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t))+t),window.ksortObjArray=(t,e)=>t.sort(((t,n)=>{let r=0;return t[e]>n[e]?r=1:t[e]<n[e]&&(r=-1),r}));var e=n(780),r=n(1667),s=n(557),i=n(620),a=n(2478),o=n(5814),l=n(8576),h=n(7187);window.RAMDA=t,window.NBBMODULECLASS=class{constructor(t,e){this.name="module",this.label="MODULE",this.ready=!1,this.options=e,this.defaults={},this.event=new h.EventEmitter,this.items=[],t&&(this.parent=t),this.parent&&(this.parent.app&&(this.app=this.parent.app))}on(){this.event.on.apply(this.event,Array.from(arguments))}emit(){this.event.emit.apply(this.event,Array.from(arguments))}get(t,e){return this.items.filter((n=>{if(n.id===t)return e!==n.id}))[0]}getF(t,e,n){return this.items.filter((r=>{if(r[t]===e)return n!==r[t]}))[0]}toDOM(t){return(new DOMParser).parseFromString(t,"text/html").documentElement.querySelector("body").firstChild}fetch(t,e){return!e&&(e={method:"GET"}),fetch(t,e).then((t=>t.ok?t.json():Promise.reject(t.statusText)))}};var c=n(2591),u=n(3853),d=n(4665),p=n(2420);const g=[{name:"c",size:200,media:"(max-width: 1400px)"},{name:"i",size:700,media:"(min-width: 1400px)"}];class f extends NBBMODULECLASS{constructor(t,e,n){super(t,e),this.options=e,this.imageDataUrl=`${this.app.urlImageBase}/${this.options.pathExtracted}`,this.exposeThumbnails(),this.target=this.toDOM(p({scope:{name:this.options.fileName,thumbnails:this.thumbnails}})),this.parent.target.append(this.target),this.imageElement=this.target.querySelector("img"),this.imageElement.addEventListener("loadstart",(t=>{this.target.classList.add("loading")}),{once:!0}),this.imageElement.addEventListener("load",(()=>{this.target.classList.remove("loading"),this.target.classList.add("loaded"),this.nextImage()}),{once:!0}),this.imageElement.onerror=t=>{console.log(">>>>>>>>>>>>>> ERROR",t),this.target.classList.remove("loading"),this.target.classList.add("failed"),this.nextImage()}}exposeThumbnails(){this.thumbnails=[],g.forEach((t=>{this.thumbnails.push({url:encodeURI(`${this.app.urlMediaBase}/${t.name}/${this.options.pathExtracted}`),media:t.media})}))}load(){this.findIndex(),this.thumbnailIndex=this.thumbnails.length-1||0,this.imageElement.src=this.thumbnails[this.thumbnailIndex].url}nextImage(){if(!this.parent.parent.folders)return!1;if(this.imageIndex>=this.parent.parent.folders.length)return!1;const t=this.findNextImage();t&&t.load()}findIndex(){this.imageIndex=this.parent.parent.folders.findIndex((t=>t.image?t.image.options.hash===this.options.hash:null))}findNextImage(){if(this.imageIndex+1>=this.parent.parent.folders.length)return!1;const t=this.parent.parent.folders[this.imageIndex+1].image;return t||(this.imageIndex++,this.findNextImage())}}class m extends NBBMODULECLASS{constructor(t,e){super(t,e),this.browser=this.parent.parent.parent,this.label="FOLDERITEM",this.options=e,this.folders=this.options.childs.filter((t=>"folder"===t.type)),this.images=this.options.childs.filter((t=>"image"===t.type)),this.target=this.toDOM(d({scope:{name:this.options.folderName,count:{folders:this.folders.length,images:this.images.length}}})),this.target.onclick=t=>this.select(t),this.parent.target.append(this.target),this.exposeThumbnail()}select(t){this.browser.setLocationHash(encodeURI(this.options.pathExtracted))}exposeThumbnail(){this.images=this.options.childs.filter((t=>"image"===t.type)),0!==this.images.length&&(this.image=new f(this,this.images[0]))}}class v extends NBBMODULECLASS{constructor(t,e){super(t,e),this.label="FOLDER LISTING",this.options=e,this.target=this.parent.target.querySelector("[data-folders]"),this.set()}set(t){if(this.data=t?t.filter((t=>"folder"===t.type)):this.parent.data.data.childs.filter((t=>"folder"===t.type)),this.order(),this.folders=[],this.data.length>0){this.data.forEach((t=>{const e=new m(this,t);this.folders.push(e)}));const t=this.folders.filter((t=>t.image?t:null))[0];t&&t.image.load()}this.order(),console.log(this.label,"FOLDERS",this.folders.length)}order(t){!t&&(t="folderName"),this.data=ksortObjArray(this.data,t)}remove(){this.data&&delete this.data,this.folders&&delete this.folders}}var b=n(8775),x=n(2079);class y extends NBBMODULECLASS{constructor(t,e,n){super(t,e),this.browser=this.parent.parent.parent,this.options=e,this.imageDataUrl=`${this.app.urlImageBase}/${this.options.pathExtracted}`,this.exposeThumbnails(),this.target=this.toDOM(b({scope:{name:this.options.fileName,thumbnails:this.thumbnails}})),this.target.onclick=t=>this.select(t),this.parent.target.append(this.target),this.imageElement=this.target.querySelector("img"),this.imageElement.addEventListener("loadstart",(t=>{this.target.classList.add("loading")}),{once:!0}),this.imageElement.addEventListener("load",(()=>{this.parent.concurrentImageRequests--,this.target.classList.remove("loading"),this.target.classList.add("loaded"),this.nextImage()}),{once:!0}),this.imageElement.onerror=t=>{console.log(">>>>>>>>>>>>>> ERROR",t),this.nextImage(),this.target.classList.remove("loading"),this.target.classList.add("failed")}}select(t){this.browser.setLocationHash(this.options.pathExtracted)}exposeThumbnails(){this.thumbnails=[],g.forEach((t=>{this.thumbnails.push({url:encodeURI(`${this.app.urlMediaBase}/${t.name}/${this.options.pathExtracted}`),media:t.media})}))}load(){this.findIndex(),this.drawCountStats(),this.thumbnailIndex=this.thumbnails.length-1||0,this.imageElement.src=this.thumbnails[this.thumbnailIndex].url,this.parent.concurrentImageRequests++,this.parent.concurrentImageRequests<this.parent.maxConcurrentImageRequests-1&&this.nextImage()}nextImage(){if(!this.parent.images)return!1;if(this.imageIndex>=this.parent.images.length)return!1;const t=this.findNextImage();t&&t.load()}findIndex(){this.imageIndex=this.parent.images.findIndex((t=>t.options.hash===this.options.hash))}findNextImage(){if(this.imageIndex+1>=this.parent.images.length)return!1;const t=this.parent.images[this.imageIndex+1];return t||(this.imageIndex++,this.findNextImage())}drawCountStats(){this.coutStatsElement||(this.coutStatsElement=toDOM(x({scope:{}})),this.target.prepend(this.coutStatsElement),this.numberElement=this.coutStatsElement.querySelector("[data-number]"),this.leftElement=this.coutStatsElement.querySelector("[data-left]"),this.numberElement.innerText=`${this.imageIndex+1} / ${this.parent.images.length}`,this.leftElement.innerText=this.parent.images.length-this.imageIndex-1)}}var w=n(8457);class L extends NBBMODULECLASS{constructor(t,e){super(t,e),this.label="ITEM LISTING OPTIONS",this.options=e,this.folder=this.parent.parent,this.browser=this.folder.parent,this.isLoading=!1,this.target=this.folder.target.querySelector("[data-files-options]"),this.target.innerHTML=w(),this.registerButtons(),this.on("loading",(()=>{this.isLoading=!0,this.buttons.latest.innerText="LOADING ...",this.buttons.latest.classList.add("loading")})),this.on("data",(()=>{this.isLoading=!1,this.buttons.latest.innerText="LATEST",this.buttons.latest.classList.remove("loading")}))}registerButtons(){this.buttons={picking:this.target.querySelector("[data-picking-mode]"),selection:{all:this.target.querySelector("[data-selection-all]"),none:this.target.querySelector("[data-selection-none]"),invert:this.target.querySelector("[data-selection-invert]")},latest:this.target.querySelector("[data-load-latest]")},this.buttons.picking.onclick=t=>{},this.buttons.selection.all.onclick=t=>{},this.buttons.selection.none.onclick=t=>{},this.buttons.selection.invert.onclick=t=>{},this.buttons.latest.onclick=t=>this.get()}get(){this.isLoading||this.folder.getLatest()}}class _ extends NBBMODULECLASS{constructor(t,e){super(t,e),this.label="ITEM LISTING",this.options=e,this.folder=this.parent,this.maxConcurrentImageRequests=this.folder.maxConcurrentImageRequests||3,this.concurrentImageRequests=this.folder.concurrentImageRequests||0,this.target=this.folder.target.querySelector("[data-files]"),this.optionsElement=new L(this),this.set()}set(t){this.remove(),this.data=t?t.filter((t=>"image"===t.type)):this.folder.data.data.childs.filter((t=>"image"===t.type)),this.order(),this.images=[],this.data.length>0&&(this.data.forEach((t=>{const e=new y(this,t);this.images.push(e)})),this.images[0].load())}order(t,e){!t&&(t="mtime"),!e&&(e="DESC"),this.data=ksortObjArray(this.data,t),"DESC"===e&&this.data.reverse()}remove(){this.data&&delete this.data,this.images&&this.images.forEach((t=>t.target.remove())),this.images&&delete this.images}}class E extends NBBMODULECLASS{constructor(t,e){super(t,e),this.label="LATEST LISTING",this.options=e,this.folder=this.parent,this.browser=this.folder.parent,this.itemListingOptions=this.folder.itemListing.optionsElement,this.target=this.parent.target.querySelector("[data-latest]"),this.on("loading",(t=>{this.isLoading=!0,this.itemListingOptions.emit("loading")})),this.on("data",(t=>{this.isLoading=!1,this.itemListingOptions.emit("data"),this.folder.itemListing.set(t.data.childs)}))}get(){if(this.isLoading)return;let t=this.browser.locationExtracted.join("/"),e=`${this.browser.urlBase}/latest/${t}`;this.emit("loading",e),this.fetch(e).then((t=>this.emit("data",t)))}}class I extends NBBMODULECLASS{constructor(t,e){super(t,e),this.label="FOLDER",this.options=e,this.browser=this.parent,this.urlBase=this.app.urlBase,this.urlFolderBase=this.app.urlFolderBase,this.urlImageBase=this.app.urlImageBase,this.urlMediaBase=this.app.urlMediaBase,this.maxConcurrentImageRequests=2,this.concurrentImageRequests=0,this.location=""}set(t){this.data=t,this.location!==this.data.data.pathExtracted&&this.draw()}draw(){this.data.file?!this.target&&this.drawFolder():this.drawFolder()}drawFolder(){this.location=this.data.data.pathExtracted,this.remove(),this.target=this.toDOM(u({scope:{}})),this.browser.target.append(this.target),this.folderListing=new v(this),this.itemListing=new _(this),this.latestListing=new E(this)}drawImage(){console.log(">>> DRAW IMAGE")}remove(){this.target&&this.target.remove(),this.folderListing&&this.folderListing.remove(),this.itemListing&&this.itemListing.remove()}getLatest(){this.latestListing.get()}}var O=n(8502);class S extends NBBMODULECLASS{constructor(t,e){super(t,e),this.options=e,this.target=this.toDOM(O({scope:{}})),this.parent.target.append(this.target)}set(t){t&&(this.target.innerHTML=t)}}var B=n(6007),M=n(9416);class A extends NBBMODULECLASS{constructor(t,e){super(t,e),this.options=e,this.target=this.toDOM(B({scope:{}})),this.parent.target.append(this.target)}set(t){this.data=t,this.draw()}flush(){this.items.length>0&&this.items.forEach((t=>t.remove())),this.items=[]}draw(){this.flush();let t="";this.createItem("Home",t),""!==this.data.pathCrumped[0]&&this.data.pathCrumped.forEach(((e,n)=>{0===n&&(t=`${e}`),0!==n&&(t=`${t}/${e}`),this.createItem(e,t)}))}createItem(t,e){const n=this.toDOM(M({scope:{name:t}}));n.uriHash=e,n.onclick=t=>this.select(t),this.target.append(n),this.items.push(n)}select(t){t.preventDefault(),console.log(">>>",t.target.uriHash),this.parent.setLocationHash(encodeURI(t.target.uriHash))}}var T=n(8918),j=n(6383);const N=[{name:"l",media:"(max-width: 1000px)"},{name:"original",media:"(min-width: 1000px)"}];class C extends NBBMODULECLASS{constructor(t,e){super(t,e),this.options=e,this.imageDataUrl=`${this.parent.urlImageBase}/${this.options.pathExtracted}`,this.exposeThumbnails(),this.draw()}draw(){this.target=this.toDOM(j({scope:{name:this.options.fileName,thumbnails:this.thumbnails}})),this.parent.target.prepend(this.target),this.imageElement=this.target.querySelector("img"),this.target.classList.add("loading"),this.imageElement.onload=t=>{this.target.classList.remove("loading"),this.target.classList.add("loaded")},this.imageElement.onerror=()=>{}}exposeThumbnails(){this.thumbnails=[],N.forEach((t=>{this.thumbnails.push({url:encodeURI(`${this.parent.urlMediaBase}/${t.name}/${this.options.pathExtracted}`),media:t.media})}))}remove(){this.target&&this.target.remove()}forget(){this.target.classList.add("previous")}}var D=n(7851);class R extends NBBMODULECLASS{constructor(t,e){super(t,e),this.target=this.toDOM(D({scope:{}})),this.parent.target.prepend(this.target),this.prevElement=this.target.querySelector("[data-prev]"),this.prevElement.onclick=()=>this.prev(),this.nextElement=this.target.querySelector("[data-next]"),this.nextElement.onclick=()=>this.next(),this.closeElement=this.target.querySelector("[data-close]"),this.closeElement.onclick=()=>this.close(),this.layoutElement=this.target.querySelector("[data-layout]"),this.layoutElement.onclick=()=>this.toggleLayout(),this.prevElement.show=this.nextElement.show=function(){this.classList.remove("hidden")},this.prevElement.hide=this.nextElement.hide=function(){this.classList.add("hidden")}}prev(){let t;t=this.parent.images[this.parent.imageIndex-1]?this.parent.images[this.parent.imageIndex-1].options.pathExtracted:this.parent.images[0].options.pathExtracted,this.parent.parent.setLocationHash(t)}next(){let t;t=this.parent.images[this.parent.imageIndex+1]?this.parent.images[this.parent.imageIndex+1].options.pathExtracted:this.parent.images[this.parent.images.length-1].options.pathExtracted,this.parent.parent.setLocationHash(t)}checkPrevNext(){this.parent.images[this.parent.imageIndex-1]?this.prevElement.show():this.prevElement.hide(),this.parent.images[this.parent.imageIndex+1]?this.nextElement.show():this.nextElement.hide()}close(){this.remove(),this.parent.remove()}remove(){this.target&&this.target.remove()}toggleLayout(){this.parent.stripe?(this.parent.closeStripe(),this.layoutElement.classList.remove("down"),this.layoutElement.classList.add("up")):(this.parent.openStripe(),this.layoutElement.classList.remove("up"),this.layoutElement.classList.add("down"))}}var U=n(7174),q=n(9354);class k extends NBBMODULECLASS{constructor(t,e,n){super(t,e),this.options=e,this.imageDataUrl=`${this.parent.urlImageBase}/${this.options.pathExtracted}`,this.exposeThumbnails(),this.target=this.toDOM(q({scope:{name:this.options.fileName,thumbnails:this.thumbnails}})),this.target.onclick=t=>this.select(t),this.parent.target.append(this.target),this.imageElement=this.target.querySelector("img"),this.imageElement.onloadstart=t=>{this.target.classList.add("loading")},this.imageElement.onload=t=>{this.nextImage(),this.target.classList.remove("loading"),this.target.classList.add("loaded")},this.imageElement.onerror=t=>{this.nextImage(),this.target.classList.remove("loading"),this.target.classList.add("failed")}}select(t){this.parent.parent.parent.setLocationHash(this.options.pathExtracted)}exposeThumbnails(){this.thumbnails=[],g.forEach((t=>{this.thumbnails.push({url:encodeURI(`${this.parent.urlMediaBase}/${t.name}/${this.options.pathExtracted}`),media:t.media})}))}load(){this.findIndex(),this.thumbnailIndex=this.thumbnails.length-1||0,this.imageElement.src=this.thumbnails[this.thumbnailIndex].url}nextImage(){if(this.imageIndex>=this.parent.images.length)return!1;const t=this.findNextImage();t&&t.load()}findIndex(){this.imageIndex=this.parent.images.findIndex((t=>t.options.hash===this.options.hash))}findNextImage(){if(this.imageIndex+1>=this.parent.images.length)return!1;const t=this.parent.images[this.imageIndex+1];return t||(this.imageIndex++,this.findNextImage())}}class $ extends NBBMODULECLASS{constructor(t,e){super(t,e),console.log(">>> INIT FOLDER STRIPE"),this.urlBase=this.app.urlBase,this.urlFolderBase=this.app.urlFolderBase,this.urlImageBase=this.app.urlImageBase,this.urlMediaBase=this.app.urlMediaBase,this.open()}open(){this.remove(),this.target=this.toDOM(U({scope:{}})),this.parent.target.prepend(this.target),this.draw()}draw(){this.images=[],this.parent.parent.folder.itemListing.images.forEach((t=>{const e=new k(this,t.options);this.images.push(e)})),this.images[0].load(),setTimeout((()=>{this.scrollToActive()}),1e3)}close(){this.remove()}remove(){this.target&&this.target.remove()}scrollToActive(){let t=this.images[this.parent.imageIndex-1].target;!t&&(t=this.images[this.parent.imageIndex].target),this.target.scrollTo({top:t.offsetTop,left:0,behavior:"smooth"}),this.unselectAll(),this.images[this.parent.imageIndex].target.classList.add("active")}unselectAll(){this.images.forEach((t=>t.target.classList.remove("active")))}}class P extends NBBMODULECLASS{constructor(t,e){super(t,e),this.options=e,this.browser=this.parent,this.urlBase=this.app.urlBase,this.urlFolderBase=this.app.urlFolderBase,this.urlImageBase=this.app.urlImageBase,this.urlMediaBase=this.app.urlMediaBase}set(t){this.data=t,this.draw()}draw(){this.data.file?"image"===this.data.file.type&&this.open():this.remove()}open(){this.target||(this.target=this.toDOM(T({scope:{data:this.data}})),this.browser.target.prepend(this.target),this.images=this.browser.folder.itemListing.images,this.controls=new R(this)),document.querySelector("body").style.overflow="hidden",this.show()}close(){this.closeStripe(),this.remove()}remove(){if(this.target){this.target.remove(),delete this.target,this.closeStripe();let t=this.images[this.imageIndex].options.pathExtracted.split("/");t.pop(),t=t.join("/"),this.browser.setLocationHash(t)}document.querySelector("body").style.overflow="auto"}show(){this.previousImage&&this.previousImage.remove(),this.image&&(this.image.forget(),this.previousImage=Object.assign(this.image,{})),this.image=new C(this,this.data.file),this.findImageIndex()}prev(){this.controls.prev()}next(){this.controls.next()}findImageIndex(){this.imageIndex=this.images.findIndex((t=>t.options.filePath===this.image.options.filePath)),this.controls.checkPrevNext(),this.stripe&&this.stripe.scrollToActive()}openStripe(){this.stripe&&this.stripe.remove(),this.stripe=new $(this),this.target.classList.add("stripe")}closeStripe(){this.stripe&&(this.stripe.remove(),delete this.stripe),this.target&&this.target.classList.remove("stripe")}}class F extends NBBMODULECLASS{constructor(t,e){return super(t,e),new Promise(((t,n)=>{this.label="BROWSER",this.options=e,this.urlBase=this.app.urlBase,this.urlFolderBase=this.app.urlFolderBase,this.urlImageBase=this.app.urlImageBase,this.urlMediaBase=this.app.urlMediaBase,window.addEventListener("hashchange",(()=>this.getLocationHash()),!1),this.app.on("ready",(()=>this.getLocationHash())),this.on("hashchange",(()=>this.get())),this.on("data",(t=>{console.log(">>> GOT DATA",t.data.type,t.data.id),this.pageTitle.set(t.data.folderName),this.breadcrumb.set(t.data),this.folder.set(t),this.imageViewer.set(t)})),this.target=this.toDOM(c({scope:{}})),this.parent.target.append(this.target),this.pageTitle=new S(this),this.breadcrumb=new A(this),this.folder=new I(this),this.imageViewer=new P(this),t()}))}get(){this.stopLoadingAllResources();let t=this.locationExtracted.join("/"),e=`${this.urlBase}/funnel/${t}`,n=!1;if(!this.folder.target){console.log(">>> NOTHING HERE"),n=e,this.locationExtracted.pop();const t=this.locationExtracted.join("/");e=`${this.urlBase}/funnel/${t}`}this.fetch(e).then((t=>{this.emit("data",t),n&&this.fetch(n).then((t=>{this.emit("data",t)}))}))}getLocationHash(){const t=new URL(document.location);this.locationHash=t.hash.replace(/#/,""),console.log(this.label,"GOT LOCATION HASH",this.locationHash,this.locationExtracted)}setLocationHash(t){window.location.hash=`#${t}`}stopLoadingAllResources(){}get locationHash(){return this._locationHash}set locationHash(t){this._locationHash=t,this.locationExtracted=this.locationHash.split("/"),this.emit("hashchange")}}class H extends NBBMODULECLASS{constructor(t){return super(),new Promise(((e,n)=>(this.label="APP",console.log(this.label,"INIT"),this.app=this,this.options=t,this.apiBaseUrl=`${window.location.origin}`,this.urlBase=`${this.apiBaseUrl}/v1`,this.urlFolderBase=`${this.urlBase}/folder`,this.urlImageBase=`${this.urlBase}/image`,this.urlMediaBase=`${this.urlBase}/media`,this.rootElement=this.options.target,this.target=this.rootElement,this.on("ready",(()=>e())),new F(this).then((t=>{this.browser=t,this.emit("ready")})))))}}window.GALLERY=H})(),(()=>{"use strict";var t=n(3379),e=n.n(t),r=n(7795),s=n.n(r),i=n(569),a=n.n(i),o=n(3565),l=n.n(o),h=n(9216),c=n.n(h),u=n(4589),d=n.n(u);const p=n.p+"../../dist/prod/css/app.css";var g={};g.styleTagTransform=d(),g.setAttributes=l(),g.insert=a().bind(null,"head"),g.domAPI=s(),g.insertStyleElement=c();e()(p,g)})()})();